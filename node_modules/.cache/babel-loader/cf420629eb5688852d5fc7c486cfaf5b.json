{"remainingRequest":"/home/andre/dev/tanandre.github.io/stringtools/node_modules/babel-loader/lib/index.js!/home/andre/dev/tanandre.github.io/stringtools/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/andre/dev/tanandre.github.io/stringtools/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/andre/dev/tanandre.github.io/stringtools/src/components/Tools.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/andre/dev/tanandre.github.io/stringtools/src/components/Tools.vue","mtime":1538186354592},{"path":"/home/andre/dev/tanandre.github.io/stringtools/package.json","mtime":1538186354588},{"path":"/home/andre/dev/tanandre.github.io/stringtools/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/home/andre/dev/tanandre.github.io/stringtools/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/andre/dev/tanandre.github.io/stringtools/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/home/andre/dev/tanandre.github.io/stringtools/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"/home/andre/dev/tanandre.github.io/stringtools/node_modules/@babel/runtime/helpers/builtin/es6/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState } from 'vuex';\nimport store from '../store';\n\nfunction debounce(ms) {\n  var timer = 0;\n  return function (callback) {\n    clearTimeout(timer);\n    timer = setTimeout(callback, ms);\n  };\n}\n\nfunction isEdge() {\n  return /Edge\\/\\d./i.test(navigator.userAgent);\n}\n\nvar copyDebouncer = debounce(400);\nimport formatUtil from '../js/FormatUtil';\nimport ActionList from './ActionList.vue';\nimport ErrorToaster from './ErrorToaster.vue';\nimport Settings from './Settings.vue';\nimport Editor from './Editor.vue';\nimport UserAuthPane from './UserAuthPane.vue';\nexport default {\n  components: {\n    ErrorToaster: ErrorToaster,\n    Settings: Settings,\n    ActionList: ActionList,\n    UserAuthPane: UserAuthPane,\n    Editor: Editor\n  },\n  data: function data() {\n    return {\n      showCopy: false,\n      drawer: true,\n      showTextarea: true,\n      isEdge: isEdge(),\n      actions: [{\n        label: 'encode URL',\n        icon: 'cloud',\n        shortKey: 'ctrl-[',\n        action: encodeURIComponent\n      }, {\n        label: 'decode URL',\n        icon: 'cloud_queue',\n        shortKey: 'ctrl-shift-[',\n        action: decodeURIComponent\n      }, {\n        label: 'encode Base64',\n        icon: 'hdr_strong',\n        shortKey: 'ctrl-]',\n        action: btoa\n      }, {\n        label: 'decode Base64',\n        icon: 'hdr_weak',\n        shortKey: 'ctrl-shift-]',\n        action: atob\n      }, {\n        label: 'format JSON',\n        icon: 'format_line_spacing',\n        shortKey: 'ctrl-shift-f',\n        action: formatUtil.formatJson\n      }, {\n        label: 'format XML',\n        icon: 'code',\n        shortKey: 'ctrl-shift-f',\n        action: formatUtil.formatXml\n      }]\n    };\n  },\n  computed: _objectSpread({}, mapState({\n    user: function user(state) {\n      return state.session.user;\n    },\n    autoCopy: function autoCopy(state) {\n      return state.settings.autoCopy;\n    }\n  })),\n  mounted: function mounted() {\n    window.addEventListener('keydown', this.onKeyDown);\n  },\n  methods: {\n    onKeyDown: function onKeyDown(key) {\n      var ta = this.getTextArea();\n\n      if (!ta.value) {\n        return;\n      } // console.log(key, key.keyCode);\n\n\n      if (key.ctrlKey && key.shiftKey && key.keyCode === 70) {\n        var errors = [];\n\n        try {\n          ta.value = formatUtil.formatJson(ta.value);\n        } catch (e) {\n          errors.push(e);\n        }\n\n        try {\n          ta.value = formatUtil.formatXml(ta.value);\n        } catch (e) {\n          errors.push(e);\n        }\n\n        if (errors.length === 2) {\n          this.handleError(new Error('text not formatted: could not parse as JSON or XML'));\n        }\n\n        this.copyToClipboard();\n        return;\n      }\n\n      if (key.ctrlKey && !key.shiftKey && key.keyCode === 219) {\n        return this.safeExecute(encodeURIComponent);\n      } else if (key.ctrlKey && key.shiftKey && key.keyCode === 219) {\n        return this.safeExecute(decodeURIComponent);\n      } else if (key.ctrlKey && !key.shiftKey && key.keyCode === 221) {\n        return this.safeExecute(btoa);\n      } else if (key.ctrlKey && key.shiftKey && key.keyCode === 221) {\n        return this.safeExecute(atob);\n      }\n    },\n    getTextArea: function getTextArea() {\n      return this.$refs['textareaContainer'].$el ? this.$refs['textareaContainer'].$el : this.$refs['textareaContainer'];\n    },\n    copyToClipboard: function copyToClipboard() {\n      var _this = this;\n\n      var ta = this.getTextArea(); // attempt to add to undo buffer\n\n      ta.blur();\n      ta.focus();\n      ta.select();\n      document.execCommand('copy');\n      copyDebouncer(function () {\n        ta.blur();\n        ta.focus();\n        _this.showCopy = true;\n      });\n    },\n    handleError: function handleError(e) {\n      console.error(e);\n      this.$store.commit('error', e);\n    },\n    safeExecute: function safeExecute(fnc) {\n      this.error = null;\n\n      try {\n        var ta = this.getTextArea();\n\n        if (!ta.value) {\n          return;\n        } // attempt to add to undo buffer\n\n\n        ta.blur();\n        ta.focus();\n        var value = fnc(ta.value);\n        ta.value = value;\n\n        if (this.autoCopy) {\n          this.copyToClipboard();\n        }\n      } catch (e) {\n        this.handleError(e);\n      }\n    }\n  }\n};",{"version":3,"sources":["Tools.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n   <v-app dark>\n      <v-navigation-drawer clipped fixed v-model=\"drawer\" app>\n         <ActionList :actions=\"actions\" v-on:action=\"safeExecute\"></ActionList>\n         <Settings></Settings>\n      </v-navigation-drawer>\n      <v-toolbar app fixed clipped-left dense class=\"toolbar\">\n         <v-toolbar-side-icon @click.stop=\"drawer = !drawer\"></v-toolbar-side-icon>\n         <v-toolbar-title>String Tools</v-toolbar-title>\n         <v-spacer></v-spacer>\n         <UserAuthPane></UserAuthPane>\n         <v-toolbar-items>\n         </v-toolbar-items>\n      </v-toolbar>\n      <v-content>\n         <Editor ref=\"textareaContainer\"></Editor>\n         <ErrorToaster></ErrorToaster>\n         <v-snackbar v-model=\"showCopy\" top>\n            <span><v-icon class=\"snackbarIcon\">content_copy</v-icon><small>Text copied...</small></span>\n         </v-snackbar>\n      </v-content>\n   </v-app>\n</template>\n\n<script>\n\timport { mapState } from 'vuex';\n\timport store from '../store';\n\n\tfunction debounce(ms) {\n\t\tlet timer = 0;\n\t\treturn (callback) => {\n\t\t\tclearTimeout(timer);\n\t\t\ttimer = setTimeout(callback, ms);\n\t\t}\n\t}\n\n\tfunction isEdge() {\n\t\treturn /Edge\\/\\d./i.test(navigator.userAgent);\n\t}\n\n\tlet copyDebouncer = debounce(400);\n\n\timport formatUtil from '../js/FormatUtil'\n\timport ActionList from './ActionList.vue'\n\timport ErrorToaster from './ErrorToaster.vue'\n\timport Settings from './Settings.vue'\n\timport Editor from './Editor.vue'\n\timport UserAuthPane from './UserAuthPane.vue'\n\n\texport default {\n\t\tcomponents: {\n\t\t\tErrorToaster,\n\t\t\tSettings,\n\t\t\tActionList,\n\t\t\tUserAuthPane,\n\t\t\tEditor\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tshowCopy: false,\n\t\t\t\tdrawer: true,\n\t\t\t\tshowTextarea: true,\n\t\t\t\tisEdge: isEdge(),\n\t\t\t\tactions: [\n\t\t\t\t\t{ label: 'encode URL', icon: 'cloud', shortKey: 'ctrl-[', action: encodeURIComponent },\n\t\t\t\t\t{ label: 'decode URL', icon: 'cloud_queue', shortKey: 'ctrl-shift-[', action: decodeURIComponent },\n\t\t\t\t\t{ label: 'encode Base64', icon: 'hdr_strong', shortKey: 'ctrl-]', action: btoa },\n\t\t\t\t\t{ label: 'decode Base64', icon: 'hdr_weak', shortKey: 'ctrl-shift-]', action: atob },\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'format JSON',\n\t\t\t\t\t\ticon: 'format_line_spacing',\n\t\t\t\t\t\tshortKey: 'ctrl-shift-f',\n\t\t\t\t\t\taction: formatUtil.formatJson\n\t\t\t\t\t},\n\t\t\t\t\t{ label: 'format XML', icon: 'code', shortKey: 'ctrl-shift-f', action: formatUtil.formatXml }\n\t\t\t\t]\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\t...mapState({\n\t\t\t\tuser: state => state.session.user,\n\t\t\t\tautoCopy: state => state.settings.autoCopy\n\t\t\t}),\n\t\t},\n\t\tmounted() {\n\t\t\twindow.addEventListener('keydown', this.onKeyDown)\n\t\t},\n\t\tmethods: {\n\t\t\tonKeyDown(key) {\n\t\t\t\tconst ta = this.getTextArea();\n\t\t\t\tif (!ta.value) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// console.log(key, key.keyCode);\n\t\t\t\tif (key.ctrlKey && key.shiftKey && key.keyCode === 70) {\n\t\t\t\t\tlet errors = [];\n\t\t\t\t\ttry {\n\t\t\t\t\t\tta.value = formatUtil.formatJson(ta.value);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\terrors.push(e);\n\t\t\t\t\t}\n\t\t\t\t\ttry {\n\t\t\t\t\t\tta.value = formatUtil.formatXml(ta.value);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\terrors.push(e);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (errors.length === 2) {\n\t\t\t\t\t\tthis.handleError(new Error('text not formatted: could not parse as JSON or XML'));\n\t\t\t\t\t}\n\t\t\t\t\tthis.copyToClipboard();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (key.ctrlKey && !key.shiftKey && key.keyCode === 219) {\n\t\t\t\t\treturn this.safeExecute(encodeURIComponent);\n\t\t\t\t} else if (key.ctrlKey && key.shiftKey && key.keyCode === 219) {\n\t\t\t\t\treturn this.safeExecute(decodeURIComponent);\n\t\t\t\t} else if (key.ctrlKey && !key.shiftKey && key.keyCode === 221) {\n\t\t\t\t\treturn this.safeExecute(btoa);\n\t\t\t\t} else if (key.ctrlKey && key.shiftKey && key.keyCode === 221) {\n\t\t\t\t\treturn this.safeExecute(atob);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tgetTextArea() {\n\t\t\t\treturn this.$refs['textareaContainer'].$el ? this.$refs['textareaContainer'].$el : this.$refs['textareaContainer'];\n\t\t\t},\n\n\t\t\tcopyToClipboard() {\n\t\t\t\tconst ta = this.getTextArea();\n\t\t\t\t// attempt to add to undo buffer\n\t\t\t\tta.blur();\n\t\t\t\tta.focus();\n\n\t\t\t\tta.select();\n\t\t\t\tdocument.execCommand('copy');\n\t\t\t\tcopyDebouncer(() => {\n\t\t\t\t\tta.blur();\n\t\t\t\t\tta.focus();\n\t\t\t\t\tthis.showCopy = true;\n\t\t\t\t});\n\t\t\t},\n\n\t\t\thandleError(e) {\n\t\t\t\tconsole.error(e);\n\t\t\t\tthis.$store.commit('error', e);\n\t\t\t},\n\n\t\t\tsafeExecute(fnc) {\n\t\t\t\tthis.error = null;\n\t\t\t\ttry {\n\t\t\t\t\tconst ta = this.getTextArea();\n\t\t\t\t\tif (!ta.value) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// attempt to add to undo buffer\n\t\t\t\t\tta.blur();\n\t\t\t\t\tta.focus();\n\n\t\t\t\t\tlet value = fnc(ta.value);\n\t\t\t\t\tta.value = value;\n\t\t\t\t\tif (this.autoCopy) {\n\t\t\t\t\t\tthis.copyToClipboard();\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tthis.handleError(e);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scoped>\n   .start .navigation-drawer {\n      padding: 0;\n   }\n</style>\n"],"sourceRoot":"src/components"}]}